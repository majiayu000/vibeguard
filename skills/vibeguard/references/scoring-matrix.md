# Risk-Impact 评分矩阵

用于对冗余/回归发现进行优先级排序。

## 评分维度

每个发现从 1 到 5 打分：

### impact（影响）
- 1: 可忽略，纯美化
- 2: 低影响，仅影响可读性
- 3: 中等，维护性/正确性有明显收益
- 4: 较高，影响核心功能或数据完整性
- 5: 重大，架构级改进或修复严重缺陷

### effort（工作量）
- 1: 极小，单文件局部改动
- 2: 较小，2-3 文件改动
- 3: 中等，多文件跨模块改动
- 4: 较大，需要重构或迁移
- 5: 大量，跨系统的大规模变更

### risk（风险）
- 1: 低，几乎不可能引发回归
- 2: 较低，影响范围可控
- 3: 中等，需要定向测试验证
- 4: 较高，影响核心流程
- 5: 高，兼容性敏感或高回归风险

### confidence（置信度）
- 1: 弱证据，仅凭推测
- 2: 较弱，有间接线索
- 3: 中等，有部分调用路径证据
- 4: 较强，有测试/编译器警告证据
- 5: 强证据，有完整调用路径/测试/日志

## 优先级公式

```
priority_score = (impact × confidence) - (effort + risk)
```

解读：
- 分数越高 → 越早执行
- 负分 → 延后处理（除非有阻塞原因必须提前）

## 阶段映射

| 阶段 | 条件 | 描述 |
|------|------|------|
| P0 | score >= 12 | 必须优先处理（高影响 + 高置信） |
| P1 | 4 <= score < 12 | 有明显价值，风险可控 |
| P2 | score < 4 | 清理/收尾任务 |

## 评分表模板

```markdown
| id | finding | impact | effort | risk | confidence | score | phase |
|----|---------|--------|--------|------|------------|-------|-------|
| F1 | ...     | 5      | 2      | 2    | 5          | 21    | P0    |
| F2 | ...     | 3      | 3      | 3    | 4          | 6     | P1    |
| F3 | ...     | 2      | 1      | 1    | 3          | 4     | P1    |
| F4 | ...     | 1      | 2      | 2    | 2          | -2    | P2    |
```

## 门控规则

1. 低置信度 + 高风险的变更，不安排在 P0
2. P0/P1 的高风险发现，必须先插入守护测试再重构
3. 每个阶段完成后重新评估剩余发现的分数（架构假设可能已变）
4. 无证据的发现不进入计划
